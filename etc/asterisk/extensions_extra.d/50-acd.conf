; ===== ACD entry (send callers here) =====
[acd-entry]
exten => _X.,1,NoOp(ACD inbound ${CALLERID(num)} -> ${EXTEN})
 same => n,Set(QUEUE_NAME=${IF($["${EXTEN}"="8001"]?support:sales)})
 same => n,Queue(${QUEUE_NAME},tTk)   ; t/T transfer, k keep connected
 same => n,Hangup()

; ===== Callback handling =====
[acd-callback]
exten => _X.,1,NoOp(ACD callback to ${EXTEN} for ${CALLERID(num)})
 same => n,Originate(PJSIP/${EXTEN},app,callback-bridge,1,${CALLERID(num)})
 same => n,Hangup()

[callback-bridge]
exten => 1,1,NoOp(Bridge caller <-> agent)
 same => n,Bridge(${BRIDGEPEER},p)   ; placeholder â€“ replace with calld-driven bridge if desired
 same => n,Hangup()

; ===== Supervisor monitor / whisper / barge =====
[acd-monitor]
exten => _MONITOR-.,1,NoOp(Monitor ${EXTEN:8})
 same => n,ChanSpy(${EXTEN:8},q)           ; listen only
 same => n,Hangup()

exten => _WHISPER-.,1,NoOp(Whisper ${EXTEN:8})
 same => n,ChanSpy(${EXTEN:8},qw)          ; whisper to agent
 same => n,Hangup()

exten => _BARGE-.,1,NoOp(Barge ${EXTEN:6})
 same => n,ChanSpy(${EXTEN:6},qb)          ; barge
 same => n,Hangup()
